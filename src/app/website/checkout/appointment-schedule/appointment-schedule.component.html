<app-checkout-header></app-checkout-header>

<div class="web auto-flex-start-gap40-column main-div padding-top-40">

    <div class="auto-flex-center-start-gap20 width-max-550 padding-20 cursor-pointer" (click)="navigateToCart()">

        <img class="xxxsmallImg" src="assets/images/web/icons/back_arrow.svg" >
        <p class="xsmall bold web-font-primary-light">Back to schedule</p>

    </div>

    <div class="auto-flex-start-gap20-column gray-border border-radius-20 padding-20">

        <p class="med bold">Payment summary</p>

        <div class="auto-flex-start-gap20-column">

            <div class="auto-flex-center-space-between-gap20">
                
                <p class="web-font-primary-light">Subtotal</p>
                <p class="web-font-primary-light bold">SAR {{ totalCost }}</p>

            </div>    

            <div class="auto-flex-center-space-between-gap20">
                
                <p class="web-font-primary-light">Total (tax incl.)</p>
                <p class="web-font-primary-light bold blue-color">SAR 6000</p>

            </div>    

        </div>

    </div>

    <div class="auto-flex-start-gap20-column gray-border border-radius-20 padding-20">

        <p class="med bold">Date & time</p>

        <div class="auto-flex-center-space-between-gap20">

            <div class="auto-flex-center-gap10-no-set-width gray-border border-radius-20 width-half">
                
                <div class="auto-flex-center-space-between-gap20 calendar">

                    <div class="auto-flex-center-space-between-gap20 calendar-header">

                        <button class="arrow-button" [disabled]="isPreviousDisabled()" (click)="goToPreviousWeek()">
                        <img class="xxxsmallImg" src="assets/images/web/icons/prev.svg" />
                      </button>

                      <div class="header-text small-font bold">{{ currentMonthAndYear }}</div>

                      <button class="arrow-button" (click)="goToNextWeek()">
                        <img class="xxxsmallImg" src="assets/images/web/icons/next.svg" />
                      </button>

                    </div>

                    <div class="auto-flex-center-space-between-gap20 week">
                      <div class="auto-flex-center-space-between-gap20 day-labels phone-no-gap">
                        <div class="day-label web-font-primary-light xsmall">SUN</div>
                        <div class="day-label web-font-primary-light xsmall">MON</div>
                        <div class="day-label web-font-primary-light xsmall">TUE</div>
                        <div class="day-label web-font-primary-light xsmall">WED</div>
                        <div class="day-label web-font-primary-light xsmall">THU</div>
                        <div class="day-label web-font-primary-light xsmall">FRI</div>
                        <div class="day-label web-font-primary-light xsmall">SAT</div>
                      </div>

                      <div class="auto-flex-center-space-between-gap20 days phone-no-gap">

                        <div class="day cursor-pointer" *ngFor="let day of currentWeek" (click)="selectDate(day)" [ngClass]="{ 'selected-date': selectedDate?.toDateString() === day.toDateString() }">
                            {{ day.getDate() }}
                        </div>
                        
                      </div>
                      
                    </div>
                    
                  </div>
                  
            </div>
            
            <div class="time-slots auto-flex-start-gap10-no-set-width width-half" *ngIf="timeSlots.length>0">

                <p class="gray-border padding-10 padding-left-right-30 blue-color border-radius-10 max-width width-max-150 text-center cursor-pointer" *ngFor="let timeSlot of timeSlots" (click)="setPreferredTimeSlot(timeSlot)" [ngClass]="{ 'selected-date': preferredTime === timeSlot }">{{ timeSlot }}</p>

            </div>              

        </div>

    </div>

    <div class="auto-flex-start-gap20-column gray-border border-radius-20 padding-20">

        <p class="med bold">Notes</p>

        <div class="auto-flex-center-space-between-gap20">

            <div class="width-70Percent">

                <textarea class="max-width border-radius-20 gray-border text-area-color padding-10" rows="10" id="patient_note"></textarea>

            </div>

            <div class="auto-flex-center-gap10-no-set-width width-25Percent">

                <img class="medImg" src="assets/images/web/icons/file_upload.svg" />

                <div class="auto-flex-start-gap10-column-no-set-width">

                    <p>x Attachment</p>
                    <p>x Attachment</p>
                    <p>x Attachment</p>

                </div>

            </div>
            
        </div>

    </div>

    <button class="primary-bg max-width padding-10" (click)="proceedToPay()">Continue</button>

    <!-- Cart error -->
    <app-custom-alert *ngIf="loginAlert" [title]="'User not logged in'" [message]="'Please log in to continue'" [cancelButtonText]="'Cancel'" [continueButtonText]="'login'" (cancelClick)="handleCancelClick()" (continueClick)="handleContinueClick()" [showCancel]="false" [showConfirm]="true"></app-custom-alert>

</div>